version = 1

[install]
nodejs.pkg-path = "nodejs"

[hook]
on-activate = """
  # Autogenerated by Flox

  # Install nodejs dependencies
  npm install

  # End autogenerated by Flox
"""

[build.quotes-app-nodejs]
command = """
   mkdir -p $out/{lib,bin} 
	 cp -pr package.* quotes.json app.js $out/lib
   pushd $out/lib
   npm install --omit=dev
   popd
   echo "#!/usr/bin/env sh" >  $out/bin/quotes-app-nodejs
   echo "exec node $out/lib/app.js" >> $out/bin/quotes-app-nodejs
   chmod 755 $out/bin/quotes-app-nodejs
"""
description = "A quotes app written in nodejs"
version = "0.0.1"

[build.quotes-app-nodejs-pure]
command = """
   mkdir -p $out/{lib,bin} 
	 cp -pr package.* quotes.json app.js $out/lib
   pushd $out/lib
   npm install --omit=dev
   popd
   echo "#!/usr/bin/env sh" >  $out/bin/quotes-app-nodejs
   echo "exec node $out/lib/app.js" >> $out/bin/quotes-app-nodejs
   chmod 755 $out/bin/quotes-app-nodejs
"""
description = "A quotes app written in nodejs"
version = "0.0.1"
sandbox = "pure"

[services]
quotes-nodejs.command = "npm start"
